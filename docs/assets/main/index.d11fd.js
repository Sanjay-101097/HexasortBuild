System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./tileCreation.ts"],(function(t){"use strict";var i,e,n,o,a,r,s,l,h,u,c,d,p,f,v,g,y,T,C,m,A,E;return{setters:[function(t){i=t.defineProperty,e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,h=t.Prefab,u=t.AudioClip,c=t.Camera,d=t.setDisplayStats,p=t.AudioSource,f=t.input,v=t.Input,g=t.PhysicsSystem,y=t.Vec3,T=t.instantiate,C=t.tween,m=t.geometry,A=t.Component},function(t){E=t.tileCreation}],execute:function(){var _,D,S,b,M,O,x,I,H,U,w,N,P,R,F;r._RF.push({},"3fafeM86fVLoqVaZ6JIGMSr","GameManager",void 0);var V=s.ccclass,z=s.property;t("GameManager",(_=V("GameManager"),D=z(E),S=z(l),b=z(h),M=z(u),O=z(c),_((F=R=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(a(e),"tileCreation",H,a(e)),o(a(e),"Canvas",U,a(e)),o(a(e),"WinParticle",w,a(e)),o(a(e),"AudioClips",N,a(e)),o(a(e),"cameraCom",P,a(e)),i(a(e),"_ray",new m.Ray),i(a(e),"_touchStartX",0),i(a(e),"_initialAngles",[]),i(a(e),"rotatingNodeArry",[]),i(a(e),"setsData",void 0),i(a(e),"setIndexData",void 0),i(a(e),"count",0),i(a(e),"audioSource",void 0),i(a(e),"_playIndex",0),i(a(e),"repeatCount",10),i(a(e),"playDuration",.1),i(a(e),"enable",!1),i(a(e),"initAngle",void 0),i(a(e),"sound",!0),i(a(e),"items",[]),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.tileCreation.placingCircularContainers(),this.tileCreation.tileGenerate(18,0),this.tileCreation.tileGenerate(12,1),this.tileCreation.tileGenerate(6,2),d(!1)},r.start=function(){this.setsData=this.tileCreation.setArrayData,this.setIndexData=this.tileCreation.setIdexArrayData,this.audioSource=this.node.getComponent(p)},r.onEnable=function(){f.on(v.EventType.TOUCH_START,this.onTouchStart,this),f.on(v.EventType.TOUCH_MOVE,this.onTouchMove,this),f.on(v.EventType.TOUCH_END,this.onTouchEnd,this)},r.onDisable=function(){f.off(v.EventType.TOUCH_START,this.onTouchStart,this),f.off(v.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(v.EventType.TOUCH_END,this.onTouchEnd,this)},r.onTouchStart=function(t){var i=t.touch;if(this._touchStartX=i.getLocationX(),this.cameraCom.screenPointToRay(i.getLocationX(),i.getLocationY(),this._ray),this.rotatingNodeArry=[],this._initialAngles=[],g.instance.raycast(this._ray)){var e=g.instance.raycastResults;e.sort((function(t,i){return t.distance-i.distance}));for(var n=0;n<e.length;n++){var o=e[n];if("Circle1"==o.collider.node.name)return this.enable=!0,this.rotatingNodeArry.push(o.collider.node),console.log("C",e[n]),void this._initialAngles.push(o.collider.node.eulerAngles.y)}}else{this.rotatingNodeArry=[],this._initialAngles=[];for(var a=this.tileCreation.circularContainers,r=0;r<a.length;r++)this.rotatingNodeArry.push(a[r].children[0]),this._initialAngles.push(a[r].children[0].eulerAngles.y),this.enable=!0}},r.onTouchMove=function(t){if(1==this.sound&&(this.audioSource.clip=this.AudioClips[0],this.sound=!1,this.playAudioMultipleTimes()),this.enable)for(var i=(t.touch.getLocationX()-this._touchStartX)/2,e=0;e<this.rotatingNodeArry.length;e++){var n,o,a=this.rotatingNodeArry[e];if(this.initAngle=this._initialAngles[e],a.setRotationFromEuler(0,this.initAngle+i,0),this.rotatingNodeArry.length>1)null===(n=a.parent.children[1])||void 0===n||n.setRotationFromEuler(0,this.initAngle+i,0),null===(o=a.parent.children[2])||void 0===o||o.setRotationFromEuler(0,this.initAngle+i,0)}},r.onTouchEnd=function(t){var i=this;this.sound=!0,this.enable=!1;t.touch.getLocationX(),this._touchStartX;var e=new Set;this.rotatingNodeArry.forEach((function(t,n){var o,a,r=t.eulerAngles.y;(r=(r%360+360)%360,r=20*Math.round(r/20),t.setRotationFromEuler(0,r,0),i.rotatingNodeArry.length>1)&&(null===(o=t.parent.children[1])||void 0===o||o.setRotationFromEuler(0,r,0),null===(a=t.parent.children[2])||void 0===a||a.setRotationFromEuler(0,r,0));var s=(r-(i._initialAngles[n]%360+360)%360+360)%360;s>0&&(i.count+=1),s>180&&(s-=360);var l=Math.round(Math.abs(s/20)),h=s>=0?1:0,u=i.tileCreation.circularContainers.indexOf(t.parent);e.has(u)||(i.ShiftArray(u,l,h),e.add(u))}));var n=this.getMatchingIndices(this.setsData);n.length>0&&this.FadingAnimation(n);var o=this.shiftUpValues(this.setsData);if(o.length>0)for(var a=0;a<o.length;a++)this.FallingAnimation(o[a]);this.count>15&&(this.Canvas.active=!0,f.off(v.EventType.TOUCH_START,this.onTouchStart,this),f.off(v.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(v.EventType.TOUCH_END,this.onTouchEnd,this))},r.FallingAnimation=function(t){var i=this.tileCreation.circularContainers,e=t[0][0],n=this.setIndexData[e][t[0][1]],o=t[1][0],a=this.setIndexData[o][t[1][1]],r=i[e].children[0].children[n],s=i[o].children[0].children[a];[].concat(r.children).forEach((function(t,i){var e=t.getWorldPosition();t.removeFromParent(),s.addChild(t);var n=new y;s.inverseTransformPoint(n,e),t.setPosition(n),t.setPosition(t.position.x,.3*i,t.position.z)}))},r.FadingAnimation=function(t){f.off(v.EventType.TOUCH_START,this.onTouchStart,this),f.off(v.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(v.EventType.TOUCH_END,this.onTouchEnd,this);for(var i=this.tileCreation.circularContainers,e=0;e<t.length;e++)for(var n=0;n<this.setIndexData.length;n++){var o=this.setIndexData[n][t[e]],a=i[n].children[0].children[o];this.items.push(a)}this.tweenFunc();var r=this.items[this.items.length-1].children[5].getWorldPosition(),s=T(this.WinParticle);s.parent=this.node.parent,s.setPosition(r),C(s).to(2.4,{position:new y(s.position.x,s.position.y-14.4,s.position.z)}).call((function(){s.destroy()})).start()},r.tweenFunc=function(){var t=this;!function i(e){if(e<0)return t.items=[],f.on(v.EventType.TOUCH_START,t.onTouchStart,t),f.on(v.EventType.TOUCH_MOVE,t.onTouchMove,t),void f.on(v.EventType.TOUCH_END,t.onTouchEnd,t);var n=t.items[e].children;if(0!=n.length){!function o(a){if(a<0)i(e-1);else{var r=n[a];C(r).to(.05,{scale:new y(.2,.2,.2)}).call((function(){r.destroy(),o(a-1),t.node.getComponent(p).playOneShot(t.AudioClips[1])})).start()}}(n.length-1)}else i(e-1)}(this.items.length-1)},r.ShiftArray=function(t,i,e){var n=this.setsData[t].length;if(0!==n)if(i%=n,0===e){var o,a,r=this.setsData[t].splice(0,i);(o=this.setsData[t]).push.apply(o,r);var s=this.setIndexData[t].splice(0,i);(a=this.setIndexData[t]).push.apply(a,s)}else{var l,h,u=this.setsData[t].splice(n-i,i);(l=this.setsData[t]).unshift.apply(l,u);var c=this.setIndexData[t].splice(n-i,i);(h=this.setIndexData[t]).unshift.apply(h,c)}},r.getMatchingIndices=function(t){var i=t.length;if(0===i)return[];for(var e=t[0].length,n=[],o=0;o<e;o++){for(var a=t[0][o],r=!0,s=1;s<i;s++)if(t[s][o]!==a){r=!1;break}if(r){n.push(o);for(var l=0;l<i;l++)t[l][o]=-1}}return n},r.shiftUpValues=function(t){for(var i=t.length,e=t[0].length,n=[],o=0;o<e;o++){for(var a=-1,r=-1,s=0;s<i;s++)if(-1===t[s][o]){a=s;break}if(-1!==a){for(var l=i-1;l>a;l--)if(-1!==t[l][o]){r=l;break}-1!==r&&(t[a][o]=t[r][o],t[r][o]=-1,n.push([[r,o],[a,o]]))}}return n},r.OnStartButtonClick=function(){window.open("https://play.google.com/store/apps/details?id=com.gamebrain.hexasort","HexaSort")},r.playAudioMultipleTimes=function(){var t=this;if(this.audioSource&&this.audioSource.clip){!function i(){t._playIndex>=t.repeatCount||t.sound?t._playIndex=0:(t.audioSource.play(),t.scheduleOnce((function(){t.audioSource.stop(),t._playIndex++,i()}),t.playDuration))}()}},e}(A),i(R,"score",0),H=e((I=F).prototype,"tileCreation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(I.prototype,"Canvas",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"WinParticle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(I.prototype,"AudioClips",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=e(I.prototype,"cameraCom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=I))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/tileCreation.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var t,e,i,o,a,n,l,s,c,h,u,p;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,i=r.initializerDefineProperty,o=r.assertThisInitialized,a=r.defineProperty},function(r){n=r.cclegacy,l=r._decorator,s=r.Material,c=r.Prefab,h=r.instantiate,u=r.MeshRenderer,p=r.Component}],execute:function(){var C,f,g,y,_,d,R,v,A;n._RF.push({},"a1cf6Jzsa9JjI1qgdCkh9ZN","tileCreation",void 0);var b=l.ccclass,I=l.property;r("tileCreation",(C=b("tileCreation"),f=I(s),g=I(c),y=I(c),C((R=t((d=function(r){function t(){for(var t,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return t=r.call.apply(r,[this].concat(n))||this,i(o(t),"colorMaterials",R,o(t)),a(o(t),"color",[]),a(o(t),"originalColor",[0,1,2,3,4,5]),i(o(t),"hexagonTilePrefab",v,o(t)),i(o(t),"circularContainer",A,o(t)),a(o(t),"NUM_CIRCULAR_CONTAINERS",8),a(o(t),"HEXAGON_TILES_PER_CIRCLE",6),a(o(t),"circularContainers",[]),a(o(t),"setArrayData",[]),a(o(t),"setIdexArrayData",[]),t}e(t,r);var n=t.prototype;return n.placingCircularContainers=function(){for(var r=0;r<this.NUM_CIRCULAR_CONTAINERS;r++){var t=h(this.circularContainer);t.parent=this.node,t.setPosition(0,1.8*r,0),t.name="CircularContainer"+r,this.circularContainers.push(t)}},n.tileGenerate=function(r,t){for(var e=0;e<this.NUM_CIRCULAR_CONTAINERS;e++){for(var i=[],o=[],a=0;a<r;a++){var n=this.selectColor(),l=this.node.children[e].children[t].children[a];i.push(n),o.push(a);for(var s=0;s<this.HEXAGON_TILES_PER_CIRCLE;s++){var c=h(this.hexagonTilePrefab);this.placeColor(c,n),c.parent=l,c.setPosition(0,.3*s,0)}}i.length>=18&&(this.setIdexArrayData.push(o),this.setArrayData.push(i))}console.log("setArrayData",this.setArrayData)},n.placeColor=function(r,t){r.getComponent(u).materials[0]=this.colorMaterials[t]},n.selectColor=function(){0===this.color.length&&(this.color=[].concat(this.originalColor));var r=Math.floor(Math.random()*this.color.length),t=this.color[r];return this.color[r]=this.color[this.color.length-1],this.color.pop(),t},t}(p)).prototype,"colorMaterials",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(d.prototype,"hexagonTilePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(d.prototype,"circularContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=d))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./tileCreation.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});